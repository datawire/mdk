sudo: required
dist: trusty
services:
  - docker
env:
  global:
    - secure: "l5Ko1ZgDCafxDFVCWxRx2nLTiXXxUHcvC2sBZqVg/A5QBob2aQzcc7dFoxw/pb42G+qZnqlz3m2AYrq8Y+iJ2R//ZMzlHcTYI2jd7gXZIC41I1QFPhtwPHfixlTthMoG43Qg9t1h9jxNQu2QFit0Nj0t3EllHIaELoKfAE73HcRH6mHtXnbKJRNNhG1/Bg39bVonJycFn2CpIlmFKHOliurwUIFnhRkTsSJ4X7y2SLYWASEceFeFsKG1M52k7qfJcPIK5aq9hi53HPInUfksgBJTsU7rupqQr0C1rnkyFZKSrg+TFqF1KyLqJNN475FkpwYf0g1q0uNQYVbgJeP0BaElwsafPPFb0rrpPtXr7h2+b6HwAzo0/bRqHCNsw3P4RBsq44iX4MsoKhlxbADd4ZgIfRCo0pkSEq+x3LsBBf9blikLuCc2SC16C4NQ797bQ8bPwm2Z8teP/SlrU0B8AhZ4lXYeKL366RMUshgHWi+Pjcg+1sA6M01g6lHjqLHqaTLAXFq4ykzJWEbBdpiFncZpN35DLslhCqszJfmFHNfrkDU5uvrS6rt/ryx0R1Du3tkw2IneS1eEgCUUdlcB53Jn+OR2ZedhXgtsOfncti+7b1BgP0Z9j3tn06t92bb1xBtDmKOaloHNewmN3rck9Zy5YD/4mMFNvJU0mE3lD58="
    - secure: "G2ULsvmi4pMQUIXK0gjFaIN6AeAppmCdVz9KwaudExMRw5f0RiFveC13wYc5+bsqhhWykekgQk8wmTkNhDIeYoCtVyWRg1tP4mO2iiqXP6tnY3ZOvLgtF3LgO3v9WRTt9jKdrbLi27lGXnZ2xNogLxE2s1ms5cfUuoEGatVTljDdMT6KrcaX2duCZUayx2hTRlMuE4ZHhbKGfQfZ/+uWbKCiZ90G+BUbdJ1AMcg5K1bcwXdv3qZvOazUWt6miS+V81jYsoEP4Xayt+ChCN5zTfYHgjw9G4CDC96qug4Y/7asYYttdpDtea6cI3+IeYw3I3ng9EX4UlgEbGTlU2OT1GzMdBwXk/LoOPzBEQA+UeR8cEX/dC0X72y7AMEt/BsWsRRJHOM9f8GmxObLctgyHwAXXvUzHUMZcJfKrvaRfVZ6qn82W2BFymOMhCyy5Xp3ivA7/84cyy/GloOP5zS3VRQj7CpaesQJ0IisdXWx78mw0O0tl2E2aCXUboaEWNnMP27jdfZCdgryrgMKi5khOmemqLOOrAeO62R0VvOMGGJgl/BkhBqJLXnuSz8TPmpxAFpBNk1adNQpOP5ZV302jBkytrdmiQGVCtKYNAomlnW8Vt/mZ+OsCcTG1Ylfebfoyjs8+aAtsG7hXidCYR1UlrHLHW8mrOXTpe/f4mX8NU8="
    - secure: "lr3PYSpEZNToUu2obrXnSz+oFAqeJCFUhevGWDpf4Bx4Nc9pePq+16hdzZkN6nsu5ZinYtgauxmvyZ8plAtxXP8yh489KWbnxqrRgVf2Yuk7jK/yjc5PiXJFYTwutrkLtUxbb7plXoRUC6f5z05FlRY6hDREWYwwl7IsMzf4tGHGEyrxXBRgZ2vOMHdJF6j4LSy4wKIEPau3z/+Uj/e3BnSz7v+5/5a7Ph+9CLhkwq3cCb7Lzma7AwZ2nCQ3FjPDE8Md3YatNSOiiD27fy4YrqoHXe7Ws5iftdrM/4RhC5S3wITDkHE0qsh9ALRT0quC0mO1aCM35pNmztPuSmfsYcshEhelxK5XEHXexutm5LKQ3daWSRi5MvOHnM+puVYxYWiu3/dJ/D9AmA09sz32ezf9cYD3CHN6goeaZvE40Kx8rO602PvAAaP2jRftqI9J9Z4N9DHMdcNfJH9A2MzO8NH8duMNYi3B8vZd/nbxuxdEaUtVOIHHLt71g6DPn80ALkMlhhf3QdheK79x/jYo03afp2aC+A6VKdwGbDaRBKw0h6ddXVzi7Y9GIqiGfIoNrpFihx63Rh9R2c93eoKRvVPS+u2euzG6nKxRwtWZeFNXhzNJV+BLoJGbKExtcWCGJDOqarh0CoTjwNoKc6wXYL0sU6OFZe0P9OM8KyIotU0="
    - secure: "choZJ8LMd1zAwkPkJIgusW3GzdWpdN4yEgQj5vDJQEnddrlMf/l5aZWUWfNXQhRNHipAdBVtfbS/fDo9qyzli9OHu43s1rQqPCN/tOwETis0ZR7GZedsRvmqXSsA7DllBk+AHQAY2Cr5IWXlrdGrisXuNr/57mG4H8Uk0sNUoqje24GCsGeRqUaiM8c5xZersf1SU9uuaW5KIz/zyHovf1D9diWXbzoHp2gvbFq1xCDXNtdDV/vhDHqjVdIBrw/qfRCISqqS2gagxWNmD+oJSJ89uZs3pbLBMBh0UY6esEwV7tYwK2raOVraVZS3GBun+eTOFCvIAzhwtu/3n/Vz5i8oBrPR9a90AtEKHBql+rBWJhAL6O8F3V+IhP/FKW47ksMmYk9qnEv1P5Zh5K6WD089WZPjNVmS2beNsrDQRV8xbyFIjunKN1oxTtnICjcW8zfLjq/Dlrcd4ZJvu9OGkSkI1i2vFHlzsumm+7JRSYyCY8svbxD3adBnZR5omaJeqrLkiXGiUpLKtHU7tIu17s1mel8iWU08cbv7e88PljrL0wo1a1UIpZTxqs9EI3Yrc38NTfw94WPjgMqreOzK5Zsw1ssZBL+d+rFPg7ObeYSttHm7ssgbrGGYgKlxiIUbZyf6k421bE7/8NplAQVsXgDXYa83PUJ7Z+p9xor3fGQ="
    - secure: "sOFsG+vF0MppSqNL1elz+2+ycn2s4Kx0aA3wJpaHZJYOHcdZQ+hm9V+AkBdVKD70fYNzT09JuRDNVjjb5OXErQudN/PeFKE7FzZauioi7wGQLcVhmMvXf4VaAkxk8w/5OXh39wGu4qC912Kufs7Dm6GOZVuY4TZV/m3MZro4dyvE4+pEOdLI1TDTA/I71Qq2hhw32IQDavA0gN1c1zRy9T/m+HeNKTxIuABJfL+cQtyZGMqdBVy71QLg/wfx3ZGGLrpvjoWYztFHRVLYeMC1PoV2IG0ltBDpHzeSiY6dgOYYTH9Dlqk490NgINXlry+krChMdcfBnOEZk/khhsVRLS8l0aec/EZtN6ZzgAAjdStt1qx9fm2cRdmKC3wkv3dvLAJnyAWpjSQaRauYFiAr1rXjr3NisYseIMonf9w3n4raVj1xx8O73AJtmWeE6AHhZK8EQkFqnxlH9TZOMRGgPcSF6zH0JtuavK4/hCJWQRArZVYhIY+sVY+O2CTSHOC5q1c+rKox33YmboGE7nU7nNGjRy/Nb5aI7lPD8MlGHEBAiEEsLGV/4BxIzEzimmIjBDublnfNCBzoPzSRTrboHBTFNuZL2fUjeX9udalTKSdRhkhmqk+zlCfkAK05NTUEXT8KzitCqQfWe4hVz4AVb0dD7y4UY9Qe/D7lzcjNoDI="
    - secure: "ZJstuFPBd4rG5c49iMAWaJ6lkyUK+Si1bbGqYhqV3e2vZT0V3fEvembVEUMTSMliCNpzCQ2qF6yyqA84tJndXmK3Sm7czQy9ZTeNqtIxj/cPUNcaF3TAhdLjJH1/KIlWo/uQAXGLfdWefXVYyQwPgNCd7HJiuG/SRLg6+f+Zxz8tRFZU/8IRkMo8zKEoq8H7+XGd5tRuzHwuQE3HPtSpwVVeSZSk9mYKe0TjbOUX8Bu9MrNl6xyikTy+wtX4RD9LulzhFKhar8N0G2L2PNKCYO6NDE4BNzcI2uEajHQrqczUKQWsflCqywN/XTrMb1ml7H4K8RC7TBv6LoUQ+vjSxPIN+OwCM1A4fcbnApzuv2DmGnLhWDN8tUDTHJshhkEw3WaKvV5jo1ZlAvNc42/kCSKz8z8f5Byserk7u+3c995pyKrwvmMNu3xl46uvm+UOzboIcO7fH0THobmc4wZaRyIKTbGK79f8XzKBBLvuTHS/UUdLMABBt6j5kpfME631kYxpz6ac0RN2EBa89+nsHUWrqN0AzIs1jy7HgsDcnO2AsN6Q/erNKgwAPpNTZvlbixyWCkFJMzNE/Toj7gjuwFjbjZMoQ6/nJmmFf+rSYWW+XqVFTaie/JDPLU54l2HHzDPz6jryKBDCTM/9qR/j4JlN9pCEEpdt2Oc7hPmZOFQ="
    - secure: "fXEkYHh8HZnmBmhjXzZe3JhQHRxddqjlR0CQ0MbZUnb20eHoGJrim7x2qn0Dri9hK0KQEEVCu4/O849zSGrcYPTDnI/LOnTIKebrn4s9V6vZWsCGBVvgeJYcXef0lJVjfQciCtwU8W4YChF0OZyMr+oDpVtnGh04o+zwcYtd+fn5VLMYbzDc7NuldydNWVvg+PCNwx1cfzE/y7bLG9w0n+hKClkk6KFtu1CmVM0nXAh7aCOfizwBLaiZEe4vO+n+lvHnRtjCmK+HqliBNEwQ2UI8PcjrObblvTb2/JS7mrPAO06iTy2fd+8YHlvUbuaoLgrcFfvgPRRMZzpkF6r3lxLAj3e87jFrf14BY8dBepfrIOpK8bMmJYn4AAsvrHWhP2GL9ey8gZPtSUxRg8dzktxGi9OpMryoM2SGiaq3weSoUTfXfXPaOYQwHTcG8YFcAN+PSl8T56CgtG2/qs6p8fIsSSyQJ9p/IUQK9q1UwTSQRtQjeYqfchT3rxqIfsatnK5uHiCNLHkFl9v+mdz2B2oLXcsTHYiNXXzrelMop7Qry9qEMtUjN4/zuDZR0SyJF7P3lxZiIhABruK+B+40zy5LTs3sRO+ZUAJCbAevKw0hjcH46WkUBSOc4lmNh0+UXcV++GCWtUQ6sA1Z9caryLrIIe/DkpLuUc58qi/iwVk="

install:
  - rvm install 2.3
  - sudo docker pull datawire/quark-run:$(cat QUARK_VERSION.txt | cut -b 2-)
  - rvm use --ruby-version 2.3 && make setup

script:
  - ./.travis-test.sh

# Upload packages on successful tagged builds:
deploy:
  provider: script
  script: "make upload-packages"
  skip_cleanup: true
  on:
    tags: true
